# Kong Configuration Files

This directory contains Kong Gateway configuration files generated by the setup scripts.

## Configuration Evolution

Each configuration file represents a step in the Kong setup process:

| File | Generated By | Description |
|------|-------------|-------------|
| `01-kong-basic.yaml` | `03-configure-kong-basic.sh` | Basic services and routes only |
| `02-kong-with-auth.yaml` | `05-add-authentication.sh` | Adds key-auth and rate-limiting plugins |
| `03-kong-with-ai-proxy.yaml` | `07-add-ai-proxy.sh` | Adds AI Proxy plugin for Gemini and Ollama |
| `04-kong-complete.yaml` | `09-add-ai-security.sh` | Complete config with all security features |

## Usage

These files are used with decK to sync configuration to Kong Konnect:

```bash
deck gateway sync \
  --konnect-control-plane-name="Kong-Demo" \
  --konnect-addr="https://in.api.konghq.com" \
  --konnect-token="YOUR_TOKEN" \
  plugins/01-kong-basic.yaml
```

## Configuration Progression

### 01-kong-basic.yaml
- Services: demo-api-service, ai-router-service
- Routes: Basic routing to backend services
- Plugins: None

### 02-kong-with-auth.yaml
- Everything from 01-kong-basic.yaml
- Consumers: demo-user, power-user
- Plugins: key-auth, rate-limiting

### 03-kong-with-ai-proxy.yaml
- Everything from 02-kong-with-auth.yaml
- Services: ollama-ai-service, gemini-ai-service
- Routes: AI-specific routes
- Plugins: ai-proxy (for Gemini and Ollama)

### 04-kong-complete.yaml
- Everything from 03-kong-with-ai-proxy.yaml
- Plugins: ai-prompt-guard, response-transformer, request-size-limiting, correlation-id
- Complete production-ready configuration

## Important Notes

1. **Sequential Application**: Apply configurations in order (01 → 02 → 03 → 04)
2. **API Keys**: Defined in `02-kong-with-auth.yaml`
   - demo-user: `demo-api-key-12345` (10 req/min)
   - power-user: `power-key-67890` (50 req/min)
3. **AI Services**: Require external setup (Ollama, Gemini API key)
4. **Region**: Configured for Kong Konnect India region
